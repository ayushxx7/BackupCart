[
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Item", 
  "modified": "2017-06-05 15:54:28.501151", 
  "name": "Item-Client", 
  "script": "\n\n\nfrappe.ui.form.on(\"Item\",{\n\tdefault_warehouse:\tfunction(frm,cdt,cdn){\n\t\t\t\t\tvar item = frappe.model.get_doc(cdt, cdn); \n\t\t\t\t\tfrappe.model.set_value(cdt,cdn,\"website_warehouse\",item.default_warehouse);\n\t\t\t\t}\n});\nfrappe.ui.form.on(\"Item\",{\n\tstock_uom:\tfunction(frm,cdt,cdn){\n\t\t\t\t\tvar item = frappe.model.get_doc(cdt, cdn); \n\t\t\t\t\tfrappe.model.set_value(cdt,cdn,\"weight_uom\",item.stock_uom);\n\t\t\t\t}\n});\n\n\nfrappe.ui.form.on(\"Item\", {\n\twidth_in: function(frm, cdt, cdn) {\n\t\tvar item = frappe.model.get_doc(cdt, cdn);\n\t\tif (item.width_in >= 0) {\n\t\t\tvar width_cm = Math.round(item.width_in * 2.54 * 2)/2;\n\t\t\tfrappe.model.set_value(cdt,cdn,\"width_cm\",width_cm);\n\t\t}\nif (item.gsm > 170) {\n\t\t\tvar net_weight_num = (item.width_cm * item.length_cm * item.gsm/100000);\t    \n\t\t\tvar net_weight = \tNumber(Math.round(net_weight_num+'e3')+'e-3').toFixed(1);\n\t\t\tfrappe.model.set_value(cdt,cdn,\"net_weight\",net_weight);\n\t\t} else\n\t\t{\n\t\t\tvar net_weight_num = item.width_cm * item.length_cm * item.gsm/20000;\n\t\t\tvar net_weight = \t\tNumber(Math.round(net_weight_num+'e3')+'e-3').toFixed(1);\n\t\t\tfrappe.model.set_value(cdt,cdn,\"net_weight\",net_weight);\n\t\t}\n \t}\n});\n\nfrappe.ui.form.on(\"Item\", {\n\twidth_cm: function(frm, cdt, cdn) {\n\t\tvar item = frappe.model.get_doc(cdt, cdn);\n\t\tif (item.width_cm >= 0) {\n\t\t\tvar width_in = Math.round((item.width_cm * 2 / 2.54))/2;\n\t\t\tfrappe.model.set_value(cdt,cdn,\"width_in\",width_in);\n\t\t}\nif (item.gsm > 170) {\n\t\t\tvar net_weight_num = (item.width_cm * item.length_cm * item.gsm/100000);\t    \n\t\t\tvar net_weight = \tNumber(Math.round(net_weight_num+'e3')+'e-3').toFixed(1);\n\t\t\tfrappe.model.set_value(cdt,cdn,\"net_weight\",net_weight);\n\t\t} else\n\t\t{\n\t\t\tvar net_weight_num = item.width_cm * item.length_cm * item.gsm/20000;\n\t\t\tvar net_weight = \t\tNumber(Math.round(net_weight_num+'e3')+'e-3').toFixed(1);\n\t\t\tfrappe.model.set_value(cdt,cdn,\"net_weight\",net_weight);\n\t\t}\n \t}\n});\n\nfrappe.ui.form.on(\"Item\", {\n\tlength_in: function(frm, cdt, cdn) {\n\t\tvar item = frappe.model.get_doc(cdt, cdn);\n\t\tif (item.length_in >= 0) {\n\t\t\tvar length_cm = Math.round(item.length_in * 2.54 * 2)/2;\n\t\t\tfrappe.model.set_value(cdt,cdn,\"length_cm\",length_cm);\n\t\t}\nif (item.gsm > 170) {\n\t\t\tvar net_weight_num = (item.width_cm * item.length_cm * item.gsm/100000);\t    \n\t\t\tvar net_weight = \tNumber(Math.round(net_weight_num+'e3')+'e-3').toFixed(1);\n\t\t\tfrappe.model.set_value(cdt,cdn,\"net_weight\",net_weight);\n\t\t} else\n\t\t{\n\t\t\tvar net_weight_num = item.width_cm * item.length_cm * item.gsm/20000;\n\t\t\tvar net_weight = \t\tNumber(Math.round(net_weight_num+'e3')+'e-3').toFixed(1);\n\t\t\tfrappe.model.set_value(cdt,cdn,\"net_weight\",net_weight);\n\t\t}\n \t}\n});\n\nfrappe.ui.form.on(\"Item\", {\n\tlength_cm: function(frm, cdt, cdn) {\n\t\tvar item = frappe.model.get_doc(cdt, cdn);\n\t\tif (item.length_cm >= 0) {\n\t\t\tvar length_in = Math.round((item.length_cm / 2.54)*2)/2;\n\t\t\tfrappe.model.set_value(cdt,cdn,\"length_in\",length_in);\n\t\t}\n\t\tif (item.gsm > 170) {\n\t\t\tvar net_weight_num = (item.width_cm * item.length_cm * item.gsm/100000);\t    \n\t\t\tvar net_weight = \tNumber(Math.round(net_weight_num+'e3')+'e-3').toFixed(1);\n\t\t\tfrappe.model.set_value(cdt,cdn,\"net_weight\",net_weight);\n\t\t} else\n\t\t{\n\t\t\tvar net_weight_num = item.width_cm * item.length_cm * item.gsm/20000;\n\t\t\tvar net_weight = Number(Math.round(net_weight_num+'e3')+'e-3').toFixed(1);\n\t\t\tfrappe.model.set_value(cdt,cdn,\"net_weight\",net_weight);\n\t\t}\n \t}\n});\n\nfrappe.ui.form.on(\"Item\", {\n\tgsm: function(frm, cdt, cdn) {\n\t\tvar item = frappe.model.get_doc(cdt, cdn);\n\n\t\tif (item.gsm > 170) {\n\t\t\tvar net_weight_num = (item.width_cm * item.length_cm * \titem.gsm/100000);\t    \n\t\t\tvar net_weight = \tNumber(Math.round(net_weight_num+'e3')+'e-3').toFixed(1);\n\t\t\tfrappe.model.set_value(cdt,cdn,\"net_weight\",net_weight);\n\t\t} \n\t\tif (item.gsm < 170)\n\t\t{\n\t\t\t\n\t\t\tvar net_weight_num = item.width_cm * item.length_cm * item.gsm/20000;\n\t\t\tvar net_weight = \t\tNumber(Math.round(net_weight_num+'e3')+'e-3').toFixed(1);\n\t\t\tfrappe.model.set_value(cdt,cdn,\"net_weight\",net_weight);\n\t\t}\n\t\tif (item.gsm > 0) {\n\t\t\tvar bulk = (item.thickness / item.gsm);\t    \n\t\t\tvar bulk = Number(Math.round(bulk+'e3')+'e-3').toFixed(2);\n\t\t\tfrappe.model.set_value(cdt,cdn,\"bulk\",bulk);\n\t\t} \n \t}\n});\n\nfrappe.ui.form.on(\"Item\", {\n\tthickness: function(frm, cdt, cdn) {\n\t\tvar item = frappe.model.get_doc(cdt, cdn);\n\t\tif (item.gsm > 0) {\n\t\t\tvar bulk = (item.thickness / item.gsm);\t    \n\t\t\tvar bulk = Number(Math.round(bulk+'e3')+'e-3').toFixed(2);\n\t\t\tfrappe.model.set_value(cdt,cdn,\"bulk\",bulk);\n\t\t} \n \t}\n});\n\ncur_frm.set_query(\"brand\", function(doc, cdt, cdn) {\n\tvar d = locals[cdt][cdn];\n\treturn {\n\t\tfilters: [\n\t\t\t[\"manufacturer\", \"=\", d.manufacturer]\n\t\t]\n\t}\n});\n", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Payment Entry", 
  "modified": "2017-06-06 18:36:30.652989", 
  "name": "Payment Entry 2-Client", 
  "script": "cur_frm.set_query(\"ifsc_code\", function(doc, cdt, cdn) {\n\tvar d = locals[cdt][cdn];\n\tif(d.micr){\n\treturn {\n\t\tfilters: [\n\t\t\t[\"micr\", \"=\", d.micr]\n\t\t]\n\t}\n\t}\n});\n\n\nfrappe.ui.form.on('Payment Entry',{\n\tmicr: function(frm,cdt,cdn) {\n\t\t\n\t\tvar payment_entry = frappe.model.get_doc(cdt,cdn);\n\t\tif(payment_entry.ifsc_code)\n\t\t{\n\t\t\t\n\t\t\tfrm.call({\n\t\t\t\tmethod:\"newapp.newapp.payment_entry_2.set_branch\",\n\t\t\t\targs:{\n\t\t\t\t\tifsc:payment_entry.ifsc_code,\n\t\t\t\t},\n\t\t\t\tcallback:function(r){\n\t\t\t\t\t\n\t\t\t\t\tvar obj = JSON.parse(r.message); \t\t\t\t\tfrappe.model.set_value(cdt,cdn,\"city\",obj.city);\nfrappe.model.set_value(cdt,cdn,\"branch\",obj.branch);\nfrappe.model.set_value(cdt,cdn,\"micr\",obj.micr);\nfrappe.model.set_value(cdt,cdn,\"bank_contact\",obj.contact);\nfrappe.model.set_value(cdt,cdn,\"state\",obj.state);\nfrappe.model.set_value(cdt,cdn,\"bank_name\",obj.bank_name);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tfrappe.model.set_value(cdt,cdn,\"bank_branch\",null);\n\t\t}\n\t\t\n\t}\n});\n\nfrappe.ui.form.on('Payment Entry', {\n\tifsc_code: function(frm,cdt,cdn) {\n\t\t\n\t\tvar payment_entry = frappe.model.get_doc(cdt,cdn);\n\t\tif(payment_entry.ifsc_code)\n\t\t{\n\t\t\t\n\t\t\tfrm.call({\n\t\t\t\tmethod:\"newapp.newapp.payment_entry_2.set_branch\",\n\t\t\t\targs:{\n\t\t\t\t\tifsc:payment_entry.ifsc_code,\n\t\t\t\t},\n\t\t\t\tcallback:function(r){\n\t\t\t\t\t\n\t\t\t\t\tvar obj = JSON.parse(r.message); \t\t\t\t\tfrappe.model.set_value(cdt,cdn,\"city\",obj.city);\nfrappe.model.set_value(cdt,cdn,\"branch\",obj.branch);\nfrappe.model.set_value(cdt,cdn,\"micr\",obj.micr);\nfrappe.model.set_value(cdt,cdn,\"contact\",obj.contact);\nfrappe.model.set_value(cdt,cdn,\"state\",obj.state);\nfrappe.model.set_value(cdt,cdn,\"bank_name\",obj.bank_name);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tfrappe.model.set_value(cdt,cdn,\"bank_branch\",null);\n\t\t}\n\t\t\n\t}\n});\n\n", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Bank Master", 
  "modified": "2017-05-26 15:18:22.827698", 
  "name": "Bank Master-Client", 
  "script": "\nfrappe.ui.form.on(\"Bank Master\", {\n\tpin_code: function(frm,cdt,cdn) {\n\t\t\t\n\t\tmsgprint(__(\"bfdhkbfjh\"));\n\t\t$.ajax({\n\t\t\turl: \"https://maps.googleapis.com/maps/api/geocode/json?address=\"+frm.doc.pin_code+\"&key=AIzaSyBWwdApGpTxis4wrIDLrKVaZPmhIQvRMtw\",\n\t\t\ttype: 'POST',\n\t\t\tdataType: 'json',\n\t\t\tsuccess: function (data, textStatus, xhr) {\n\t\t\tvar address_length = data['results'][0]['address_components'].length;\n\t\t\tconsole.log(address_length);\n\t\t\t\n\t\t\tfrappe.model.set_value(cdt,cdn,\"state\",data['results'][0]['address_components'][address_length-2]['long_name']);\n\t\t\tif(address_length>4)\n\t\t\t{\n\t\t\t\tfrappe.model.set_value(cdt,cdn,\"city\",data['results'][0]['address_components'][address_length-4]['long_name']);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tfrappe.model.set_value(cdt,cdn,\"city\",data['results'][0]['address_components'][address_length-3]['long_name']);\n\t\t\t}\n\t\t\tfrappe.model.set_value(cdt,cdn,\"district\",data['results'][0]['address_components'][address_length-3]['long_name']);\n\t\t\tmsgprint(__(data['results'][0]['address_components'][address_length-2]['long_name']));\n\t\t\t},\n\t\t\terror: function (data, textStatus, xhr) {\n\t\t\t\tmsgprint(__(\"Failure!!\"));\n\t\t\t},\n\t\t});\n\t}\n});", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Address", 
  "modified": "2017-05-27 18:00:06.561501", 
  "name": "Address-Client", 
  "script": "\nfrappe.ui.form.on('Address',{\n\tpostal_code:\tfunction(frm,cdt,cdn){\n\t\t\t\tvar add = frappe.model.get_doc(cdt,cdn);\n\t\t\t\tif(add.postal_code){\n\t\t\t\t\tfrm.call({\n\t\t\t\tmethod:\"newapp.newapp.address_entry.get_address_from_pin\",\n\t\t\t\targs:{\n\t\t\t\t\tpin:add.postal_code,\n\t\t\t\t},\n\t\t\t\tcallback:function(r){\n\t\t\t\t\t\n\t\t\t\tvar obj = JSON.parse(r.message); \n\t\t\t\tfrappe.model.set_value(cdt,cdn,\"city\",obj.city);\n\t\t\t\tfrappe.model.set_value(cdt,cdn,\"state\",obj.state);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tfrappe.model.set_value(cdt,cdn,\"bank_branch\",null);\n\t\t}\n\t\t\t}\n});\n\n\n\ncur_frm.set_query(\"address_line2\", function(doc, cdt, cdn) {\n\tvar d = locals[cdt][cdn];\n\tif(d.postal_code){\n\treturn {\n\t\tfilters: [\n\t\t\t[\"pincode\", \"=\", d.postal_code]\n\t\t]\n\t}\n\t}\n});", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Pincode Master", 
  "modified": "2017-05-29 13:07:17.880010", 
  "name": "Pincode Master-Client", 
  "script": "frappe.ui.form.on('Pincode Master',{\n\tpincode:\tfunction(frm,cdt,cdn){\n\t\t\t\tvar add = frappe.model.get_doc(cdt,cdn);\n\t\t\t\tif(add.pincode){\n\t\t\t\t\tfrm.call({\n\t\t\t\tmethod:\"newapp.newapp.address_entry.get_address_from_pin_for_pincodeMaster\",\n\t\t\t\targs:{\n\t\t\t\t\tpin:add.pincode,\n\t\t\t\t},\n\t\t\t\tcallback:function(r){\n\t\t\t\t\t\n\t\t\t\tvar obj = JSON.parse(r.message); \n\t\t\t\tfrappe.model.set_value(cdt,cdn,\"taluk\",obj.taluk);\n\t\t\t\tfrappe.model.set_value(cdt,cdn,\"district_name\",obj.district_name);\nfrappe.model.set_value(cdt,cdn,\"division_name\",obj.division_name);\nfrappe.model.set_value(cdt,cdn,\"circle_name\",obj.circle_name);\nfrappe.model.set_value(cdt,cdn,\"region_name\",obj.region_name);\nfrappe.model.set_value(cdt,cdn,\"state_name\",obj.state_name);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tfrappe.model.set_value(cdt,cdn,\"bank_branch\",null);\n\t\t}\n\t\t\t}\n});\n", 
  "script_type": "Client"
 }
]